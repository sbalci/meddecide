<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Bayesian Decision Curve Analysis - Advanced Clinical Decision Making • meddecide</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Bayesian Decision Curve Analysis - Advanced Clinical Decision Making">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">meddecide</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.32.01</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/01-introduction.html">MedDecide 01: Introduction to Medical Decision Analysis for Pathologists</a></li>
    <li><a class="dropdown-item" href="../articles/02-comprehensive-guide.html">meddecide: Medical Decision Making in R</a></li>
    <li><a class="dropdown-item" href="../articles/03-agreement-advanced-features.html">Advanced Features in Interrater Agreement Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/03-agreement-analysis.html">Inter-Rater Agreement and Reliability Analysis in Pathology</a></li>
    <li><a class="dropdown-item" href="../articles/03-roc-analysis.html">ROC Curve Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/04-decision-tree-guide.html">Medical Decision Tree - Clinical Implementation Guide</a></li>
    <li><a class="dropdown-item" href="../articles/05-decision-tree-analysis.html">Decision Tree Graph Analysis: Comprehensive Guide and Testing</a></li>
    <li><a class="dropdown-item" href="../articles/06-decision-tree-vs-markov.html">Decision Tree vs Markov Chain Analysis: Complete Guide</a></li>
    <li><a class="dropdown-item" href="../articles/06-jamovi-workflow-examples.html">Jamovi Workflow Examples for Decision Tree and Markov Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/07-bayesian-decision-curve-analysis.html">Bayesian Decision Curve Analysis - Advanced Clinical Decision Making</a></li>
    <li><a class="dropdown-item" href="../articles/07-decision-trees.html">Decision Tree and Markov Chain Analysis Examples</a></li>
    <li><a class="dropdown-item" href="../articles/07-kappasizeci-comprehensive.html">Sample Size Calculations for Interobserver Agreement Studies</a></li>
    <li><a class="dropdown-item" href="../articles/08-decision-panel-clinical.html">Clinical Applications of Decision Panel Optimization</a></li>
    <li><a class="dropdown-item" href="../articles/08-kappasizefixedn-comprehensive.html">Complete Guide to kappasizefixedn: Fixed Sample Size Kappa Power Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/09-decision-panel-advanced.html">Advanced Features and Customization in Decision Panel Optimization</a></li>
    <li><a class="dropdown-item" href="../articles/09-kappasizepower-comprehensive.html">Complete Guide to kappasizepower: Power Analysis for Inter-rater Agreement Studies</a></li>
    <li><a class="dropdown-item" href="../articles/10-decision-panel-optimization.html">Introduction to Decision Panel Optimization</a></li>
    <li><a class="dropdown-item" href="../articles/11-precision-oncology.html">Precision Oncology: Biomarker-Guided Treatment Selection and Outcome Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/12-nogoldstandard.html">Analyzing Diagnostic Tests without a Gold Standard</a></li>
    <li><a class="dropdown-item" href="../articles/13-diagnostic-tests.html">Diagnostic Test Evaluation</a></li>
    <li><a class="dropdown-item" href="../articles/14-diagnostic-style-quick-guide.html">Quick Guide: Diagnostic Style Clustering in jamovi</a></li>
    <li><a class="dropdown-item" href="../articles/15-diagnostic-style-clustering.html">Diagnostic Style Clustering: Identifying Pathologist 'Schools' and Diagnostic Preferences</a></li>
    <li><a class="dropdown-item" href="../articles/16-use-in-r.html">Use meddecide in R</a></li>
    <li><a class="dropdown-item" href="../articles/17-introduction-legacy.html">meddecide: Introduction to Medical Decision Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/18-roc-analysis-legacy.html">ROC Curve Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/19-decisionpanel-advanced-legacy.html">Advanced Features and Customization in Decision Panel Optimization</a></li>
    <li><a class="dropdown-item" href="../articles/20-decisionpanel-clinical-legacy.html">Clinical Applications of Decision Panel Optimization</a></li>
    <li><a class="dropdown-item" href="../articles/21-decisionpanel-optimization-legacy.html">Introduction to Decision Panel Optimization</a></li>
    <li><a class="dropdown-item" href="../articles/22-diagnostic-style-clustering-legacy.html">Diagnostic Style Clustering: Identifying Pathologist 'Schools' and Diagnostic Preferences</a></li>
    <li><a class="dropdown-item" href="../articles/23-diagnostic-style-quick-guide-legacy.html">Quick Guide: Diagnostic Style Clustering in jamovi</a></li>
    <li><a class="dropdown-item" href="../articles/24-agreement-analysis-legacy.html">Inter-Rater Agreement and Reliability Analysis in Pathology</a></li>
    <li><a class="dropdown-item" href="../articles/25-diagnostic-tests-legacy.html">Diagnostic Test Evaluation</a></li>
    <li><a class="dropdown-item" href="../articles/25-jamovi-workflow-examples-legacy.html">Jamovi Workflow Examples for Decision Tree and Markov Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/26-medical-decision-tree-guide-legacy.html">Medical Decision Tree - Clinical Implementation Guide</a></li>
    <li><a class="dropdown-item" href="../articles/27-nogoldstandard-legacy.html">Analyzing Diagnostic Tests without a Gold Standard</a></li>
    <li><a class="dropdown-item" href="../articles/28-decision-tree-examples-legacy.html">Decision Tree and Markov Chain Analysis Examples</a></li>
    <li><a class="dropdown-item" href="../articles/29-decision-tree-vs-markov-analysis-legacy.html">Decision Tree vs Markov Chain Analysis: Complete Guide</a></li>
    <li><a class="dropdown-item" href="../articles/30-decisiontree-analysis-vignette-legacy.html">Decision Tree Graph Analysis: Comprehensive Guide and Testing</a></li>
    <li><a class="dropdown-item" href="../articles/31-precision-oncology-biomarkers-legacy.html">Precision Oncology: Biomarker-Guided Treatment Selection and Outcome Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/32-vignettes-legacy.html">meddecide: Medical Decision Making in R</a></li>
    <li><a class="dropdown-item" href="../articles/33-use-in-r-legacy.html">Use meddecide in R</a></li>
    <li><a class="dropdown-item" href="../articles/34-cotest-analysis.html">Co-Testing Analysis: Combining Diagnostic Tests for Better Clinical Decision Making</a></li>
    <li><a class="dropdown-item" href="../articles/35-screening-calculator-comprehensive.html">Screening Test Calculator: A Comprehensive Guide</a></li>
    <li><a class="dropdown-item" href="../articles/36-sequential-testing-comprehensive.html">Sequential Testing Analysis: A Comprehensive Guide</a></li>
    <li><a class="dropdown-item" href="../articles/38-modelbuilder-comprehensive.html">Clinical Prediction Model Builder</a></li>
    <li><a class="dropdown-item" href="../articles/decisionpanel_threshold_calculator.html">Decision Panel Threshold Calculator (p_t)</a></li>
    <li><a class="dropdown-item" href="../articles/meddecide-01-oncodatasets-examples.html">meddecide: Medical Decision Analysis with Oncology Data</a></li>
    <li><a class="dropdown-item" href="../articles/meddecide-05-decisiongraph-comprehensive.html">Decision Tree Analysis with decisiongraph: A Comprehensive Guide</a></li>
    <li><a class="dropdown-item" href="../articles/meddecide-09-digital-pathology-validation.html">Digital Pathology Validation: Agreement Analysis and Modality Comparison</a></li>
    <li><a class="dropdown-item" href="../articles/meddecide-15-multiclass-diagnostics-comprehensive.html">Multi-class Diagnostic Performance Evaluation</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sbalci/ClinicoPathJamoviModule/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Bayesian Decision Curve Analysis - Advanced Clinical Decision Making</h1>
            <h3 data-toc-skip class="subtitle">Comprehensive guide to
evaluating clinical utility of prediction models and diagnostic
tests</h3>
                        <h4 data-toc-skip class="author">ClinicoPath</h4>
            
            <h4 data-toc-skip class="date">2025-10-09</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/sbalci/ClinicoPathJamoviModule/blob/HEAD/vignettes/07-bayesian-decision-curve-analysis.Rmd" class="external-link"><code>vignettes/07-bayesian-decision-curve-analysis.Rmd</code></a></small>
      <div class="d-none name"><code>07-bayesian-decision-curve-analysis.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction-to-decision-curve-analysis">Introduction to Decision Curve Analysis<a class="anchor" aria-label="anchor" href="#introduction-to-decision-curve-analysis"></a>
</h2>
<p>Decision Curve Analysis (DCA) is a powerful method for evaluating the
clinical utility of prediction models and diagnostic tests. Unlike
traditional performance metrics (sensitivity, specificity, AUC), DCA
directly addresses the question: <strong>“Would using this model lead to
better clinical decisions?”</strong></p>
<div class="section level3">
<h3 id="what-makes-this-analysis-special">What Makes This Analysis Special?<a class="anchor" aria-label="anchor" href="#what-makes-this-analysis-special"></a>
</h3>
<div class="section level4">
<h4 id="clinical-utility-focus">
<strong>Clinical Utility Focus</strong><a class="anchor" aria-label="anchor" href="#clinical-utility-focus"></a>
</h4>
<ul>
<li>Moves beyond discrimination metrics to <strong>real-world decision
making</strong>
</li>
<li>Incorporates the <strong>relative harm</strong> of false positives
vs false negatives</li>
<li>Provides <strong>threshold-specific guidance</strong> for clinical
decisions</li>
<li>Quantifies <strong>net clinical benefit</strong> across decision
thresholds</li>
</ul>
</div>
<div class="section level4">
<h4 id="bayesian-enhancement">
<strong>Bayesian Enhancement</strong><a class="anchor" aria-label="anchor" href="#bayesian-enhancement"></a>
</h4>
<ul>
<li>
<strong>Uncertainty quantification</strong> through posterior
distributions</li>
<li>
<strong>Credible intervals</strong> for net benefit estimates</li>
<li>
<strong>Probability of superiority</strong> between competing
strategies</li>
<li>
<strong>Expected Value of Perfect Information (EVPI)</strong> for
research prioritization</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="when-to-use-decision-curve-analysis">When to Use Decision Curve Analysis<a class="anchor" aria-label="anchor" href="#when-to-use-decision-curve-analysis"></a>
</h3>
<p><strong>Perfect for:</strong> - Evaluating prediction models for
clinical implementation - Comparing diagnostic tests with different
cost-benefit profiles - Determining optimal decision thresholds for
interventions - Assessing value of additional biomarkers or clinical
variables - Health economic evaluation of diagnostic strategies</p>
<p><strong>Examples:</strong> - Should we implement a cancer screening
model in practice? - At what probability threshold should we recommend
treatment? - Is an expensive biomarker worth the additional cost? -
Which prediction model provides the most clinical benefit?</p>
</div>
</div>
<div class="section level2">
<h2 id="theoretical-foundation">Theoretical Foundation<a class="anchor" aria-label="anchor" href="#theoretical-foundation"></a>
</h2>
<div class="section level3">
<h3 id="the-net-benefit-framework">The Net Benefit Framework<a class="anchor" aria-label="anchor" href="#the-net-benefit-framework"></a>
</h3>
<p>Decision Curve Analysis is based on the <strong>net benefit</strong>
metric:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mi>B</mi><mo>=</mo><mtext mathvariant="normal">Sensitivity</mtext><mo>×</mo><mtext mathvariant="normal">Prevalence</mtext><mo>−</mo><mtext mathvariant="normal">False Positive Rate</mtext><mo>×</mo><mo stretchy="false" form="prefix">(</mo><mn>1</mn><mo>−</mo><mtext mathvariant="normal">Prevalence</mtext><mo stretchy="false" form="postfix">)</mo><mo>×</mo><mfrac><msub><mi>p</mi><mi>t</mi></msub><mrow><mn>1</mn><mo>−</mo><msub><mi>p</mi><mi>t</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">NB = \text{Sensitivity} \times \text{Prevalence} - \text{False Positive Rate} \times (1-\text{Prevalence}) \times \frac{p_t}{1-p_t}</annotation></semantics></math></p>
<p>Where: - <strong>Sensitivity</strong>: True positive rate of the
test/model - <strong>Prevalence</strong>: Disease prevalence in the
population -
<strong><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>p</mi><mi>t</mi></msub><annotation encoding="application/x-tex">p_t</annotation></semantics></math></strong>:
Decision threshold (probability at which you would intervene) -
<strong><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mfrac><msub><mi>p</mi><mi>t</mi></msub><mrow><mn>1</mn><mo>−</mo><msub><mi>p</mi><mi>t</mi></msub></mrow></mfrac><annotation encoding="application/x-tex">\frac{p_t}{1-p_t}</annotation></semantics></math></strong>:
Odds ratio representing relative harm of false positives</p>
</div>
<div class="section level3">
<h3 id="understanding-decision-thresholds">Understanding Decision Thresholds<a class="anchor" aria-label="anchor" href="#understanding-decision-thresholds"></a>
</h3>
<p>The <strong>decision threshold</strong> represents the probability at
which a clinician would recommend intervention:</p>
<ul>
<li>
<strong>Low thresholds (1-5%)</strong>: Used when missing disease is
very harmful (e.g., cancer screening)</li>
<li>
<strong>Medium thresholds (10-20%)</strong>: Balanced scenarios
(e.g., cardiac interventions)<br>
</li>
<li>
<strong>High thresholds (30-50%)</strong>: Used when intervention
has significant risks (e.g., major surgery)</li>
</ul>
</div>
<div class="section level3">
<h3 id="bayesian-vs-frequentist-approaches">Bayesian vs Frequentist Approaches<a class="anchor" aria-label="anchor" href="#bayesian-vs-frequentist-approaches"></a>
</h3>
<table class="table">
<colgroup>
<col width="17%">
<col width="42%">
<col width="40%">
</colgroup>
<thead><tr class="header">
<th>Aspect</th>
<th><strong>Frequentist DCA</strong></th>
<th><strong>Bayesian DCA</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>Uncertainty</strong></td>
<td>Bootstrap confidence intervals</td>
<td>Posterior credible intervals</td>
</tr>
<tr class="even">
<td><strong>Interpretation</strong></td>
<td>Long-run frequency properties</td>
<td>Probability statements about parameters</td>
</tr>
<tr class="odd">
<td><strong>Prior Information</strong></td>
<td>Not incorporated</td>
<td>Can incorporate expert knowledge</td>
</tr>
<tr class="even">
<td><strong>Computational</strong></td>
<td>Bootstrap resampling</td>
<td>MCMC/analytical posteriors</td>
</tr>
<tr class="odd">
<td><strong>Decision Making</strong></td>
<td>Point estimates with CI</td>
<td>Full uncertainty distribution</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<div class="section level3">
<h3 id="load-required-libraries">Load Required Libraries<a class="anchor" aria-label="anchor" href="#load-required-libraries"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use the histopathology dataset for examples</span></span>
<span><span class="co"># Try to load the dataset, if it fails create a simple example dataset</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/exists.html" class="external-link">exists</a></span><span class="op">(</span><span class="st">"histopathology"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">mydata</span> <span class="op">&lt;-</span> <span class="va">histopathology</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"histopathology"</span>, package <span class="op">=</span> <span class="st">"meddecide"</span><span class="op">)</span></span>
<span>    <span class="va">mydata</span> <span class="op">&lt;-</span> <span class="va">histopathology</span></span>
<span>  <span class="op">}</span>, error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># Create a simple synthetic dataset for demonstration if data loading fails</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span>    <span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">200</span></span>
<span>    <span class="va">mydata</span> <span class="op">&lt;&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>      Age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">60</span>, <span class="fl">15</span><span class="op">)</span>,</span>
<span>      Grade <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Low"</span>, <span class="st">"Medium"</span>, <span class="st">"High"</span><span class="op">)</span>, <span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>      TStage <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"T1"</span>, <span class="st">"T2"</span>, <span class="st">"T3"</span>, <span class="st">"T4"</span><span class="op">)</span>, <span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>      MeasurementA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">50</span>, <span class="fl">20</span><span class="op">)</span>,</span>
<span>      MeasurementB <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">100</span>, <span class="fl">30</span><span class="op">)</span>,</span>
<span>      Death <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">1</span>, <span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.7</span>, <span class="fl">0.3</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Display basic dataset information</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Dataset dimensions:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">)</span>, <span class="st">"rows ×"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">)</span>, <span class="st">"columns\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Dataset dimensions: 250 rows × 38 columns</span></span></code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Outcome variable 'Death':"</span>, <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">$</span><span class="va">Death</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Outcome variable 'Death': 169 80</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Available predictors:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Age"</span>, <span class="st">"Grade"</span>, <span class="st">"TStage"</span>, <span class="st">"MeasurementA"</span>, <span class="st">"MeasurementB"</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Available predictors: Age, Grade, TStage, MeasurementA, MeasurementB</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="basic-workflow-overview">Basic Workflow Overview<a class="anchor" aria-label="anchor" href="#basic-workflow-overview"></a>
</h3>
<p>The Bayesian DCA workflow follows these steps:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Define Binary Outcome</strong>: Select outcome variable (0/1
or factor)</li>
<li>
<strong>Select Predictors</strong>: Choose models/tests to evaluate
(continuous probabilities or binary results)</li>
<li>
<strong>Set Thresholds</strong>: Define clinically relevant decision
threshold range</li>
<li>
<strong>Choose Analysis Type</strong>: Bayesian (with uncertainty)
or Frequentist (with bootstrap CI)</li>
<li>
<strong>Interpret Results</strong>: Evaluate net benefit,
probability of superiority, and EVPI</li>
</ol>
</div>
</div>
<div class="section level2">
<h2 id="core-analysis-examples">Core Analysis Examples<a class="anchor" aria-label="anchor" href="#core-analysis-examples"></a>
</h2>
<div class="section level3">
<h3 id="example-1-basic-bayesian-decision-curve-analysis">Example 1: Basic Bayesian Decision Curve Analysis<a class="anchor" aria-label="anchor" href="#example-1-basic-bayesian-decision-curve-analysis"></a>
</h3>
<p>Let’s evaluate whether age and tumor measurements can guide treatment
decisions for cancer patients.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Basic Bayesian DCA comparing age and measurements as predictors</span></span>
<span><span class="fu">bayesdca</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">mydata</span>,</span>
<span>  outcomes <span class="op">=</span> <span class="st">"Death"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Age"</span>, <span class="st">"MeasurementA"</span>, <span class="st">"MeasurementB"</span><span class="op">)</span>,</span>
<span>  thresholdMin <span class="op">=</span> <span class="fl">0.05</span>,     <span class="co"># 5% minimum threshold</span></span>
<span>  thresholdMax <span class="op">=</span> <span class="fl">0.40</span>,     <span class="co"># 40% maximum threshold</span></span>
<span>  thresholdPoints <span class="op">=</span> <span class="fl">30</span>,    <span class="co"># 30 evaluation points</span></span>
<span>  bayesianAnalysis <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  nDraws <span class="op">=</span> <span class="fl">2000</span>,          <span class="co"># Number of posterior draws</span></span>
<span>  priorStrength <span class="op">=</span> <span class="fl">2</span>       <span class="co"># Weak prior</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>What you get:</strong> - Net benefit curves with credible
intervals - Probability of each strategy being optimal - Strategy
comparison across thresholds - Comprehensive statistical tables</p>
</div>
<div class="section level3">
<h3 id="example-2-frequentist-analysis-with-bootstrap">Example 2: Frequentist Analysis with Bootstrap<a class="anchor" aria-label="anchor" href="#example-2-frequentist-analysis-with-bootstrap"></a>
</h3>
<p>For comparison, run the same analysis using frequentist methods:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Frequentist DCA with bootstrap confidence intervals</span></span>
<span><span class="fu">bayesdca</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">mydata</span>,</span>
<span>  outcomes <span class="op">=</span> <span class="st">"Death"</span>, </span>
<span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Age"</span>, <span class="st">"MeasurementA"</span>, <span class="st">"MeasurementB"</span><span class="op">)</span>,</span>
<span>  thresholdMin <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  thresholdMax <span class="op">=</span> <span class="fl">0.40</span>,</span>
<span>  thresholdPoints <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  bayesianAnalysis <span class="op">=</span> <span class="cn">FALSE</span>,  <span class="co"># Use frequentist approach</span></span>
<span>  bootstrapCI <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  bootstrapReps <span class="op">=</span> <span class="fl">2000</span>      <span class="co"># Bootstrap replications</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Differences:</strong> - Bootstrap confidence intervals
instead of credible intervals - No probability statements about
superiority - No EVPI calculations available</p>
</div>
<div class="section level3">
<h3 id="example-3-binary-diagnostic-test-evaluation">Example 3: Binary Diagnostic Test Evaluation<a class="anchor" aria-label="anchor" href="#example-3-binary-diagnostic-test-evaluation"></a>
</h3>
<p>Evaluate binary test results (e.g., imaging findings, genetic
markers):</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Convert measurements to binary tests for demonstration</span></span>
<span><span class="va">mydata_binary</span> <span class="op">&lt;-</span> <span class="va">mydata</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    HighMeasurementA <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">MeasurementA</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">MeasurementA</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>    PositiveGrade <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">Grade</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"High"</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Analyze binary diagnostic tests</span></span>
<span><span class="fu">bayesdca</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">mydata_binary</span>,</span>
<span>  outcomes <span class="op">=</span> <span class="st">"Death"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HighMeasurementA"</span>, <span class="st">"PositiveGrade"</span><span class="op">)</span>,</span>
<span>  thresholdMin <span class="op">=</span> <span class="fl">0.10</span>,</span>
<span>  thresholdMax <span class="op">=</span> <span class="fl">0.50</span>,</span>
<span>  bayesianAnalysis <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  nDraws <span class="op">=</span> <span class="fl">2000</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Binary Test Features:</strong> - Tests are applied directly
without threshold cutoffs - Results show performance at different
decision thresholds - Useful for imaging findings, genetic tests, lab
markers</p>
</div>
<div class="section level3">
<h3 id="example-4-external-prevalence-adjustment">Example 4: External Prevalence Adjustment<a class="anchor" aria-label="anchor" href="#example-4-external-prevalence-adjustment"></a>
</h3>
<p>When your study population differs from the target population:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Use external prevalence data (e.g., from registry)</span></span>
<span><span class="fu">bayesdca</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">mydata</span>,</span>
<span>  outcomes <span class="op">=</span> <span class="st">"Death"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Age"</span>, <span class="st">"MeasurementA"</span><span class="op">)</span>,</span>
<span>  thresholdMin <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  thresholdMax <span class="op">=</span> <span class="fl">0.35</span>,</span>
<span>  useExternalPrevalence <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  externalCases <span class="op">=</span> <span class="fl">150</span>,      <span class="co"># Known cases in target population</span></span>
<span>  externalTotal <span class="op">=</span> <span class="fl">1000</span>,     <span class="co"># Total target population</span></span>
<span>  bayesianAnalysis <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>When to Use:</strong> - Study cohort has different
characteristics than target population - Registry data provides better
prevalence estimates - Multi-site validation with varying prevalence</p>
</div>
</div>
<div class="section level2">
<h2 id="advanced-features">Advanced Features<a class="anchor" aria-label="anchor" href="#advanced-features"></a>
</h2>
<div class="section level3">
<h3 id="expected-value-of-perfect-information-evpi">Expected Value of Perfect Information (EVPI)<a class="anchor" aria-label="anchor" href="#expected-value-of-perfect-information-evpi"></a>
</h3>
<p>EVPI quantifies the <strong>maximum value</strong> of conducting
additional research to reduce uncertainty:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Full analysis with EVPI calculation</span></span>
<span><span class="fu">bayesdca</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">mydata</span>,</span>
<span>  outcomes <span class="op">=</span> <span class="st">"Death"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Age"</span>, <span class="st">"MeasurementA"</span>, <span class="st">"MeasurementB"</span>, <span class="st">"TStage"</span><span class="op">)</span>,</span>
<span>  thresholdMin <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  thresholdMax <span class="op">=</span> <span class="fl">0.40</span>,</span>
<span>  bayesianAnalysis <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  calculateEVPI <span class="op">=</span> <span class="cn">TRUE</span>,    <span class="co"># Enable EVPI calculation</span></span>
<span>  nDraws <span class="op">=</span> <span class="fl">3000</span>           <span class="co"># More draws for stable EVPI</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>EVPI Interpretation:</strong> - <strong>High EVPI</strong>:
Additional research would be valuable - <strong>Low EVPI</strong>:
Current evidence is sufficient for decision making - <strong>Peak
EVPI</strong>: Threshold ranges where research is most valuable -
<strong>Zero EVPI</strong>: Perfect certainty about optimal strategy</p>
</div>
<div class="section level3">
<h3 id="direction-control-for-predictors">Direction Control for Predictors<a class="anchor" aria-label="anchor" href="#direction-control-for-predictors"></a>
</h3>
<p>Control how continuous predictors are interpreted:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For biomarkers where LOWER values indicate risk</span></span>
<span><span class="fu">bayesdca</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">mydata</span>,</span>
<span>  outcomes <span class="op">=</span> <span class="st">"Death"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="st">"MeasurementB"</span>,</span>
<span>  directionIndicator <span class="op">=</span> <span class="st">"&lt;="</span>,  <span class="co"># Lower values = positive prediction</span></span>
<span>  thresholdMin <span class="op">=</span> <span class="fl">0.10</span>,</span>
<span>  thresholdMax <span class="op">=</span> <span class="fl">0.40</span>,</span>
<span>  bayesianAnalysis <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Direction Options:</strong> - <strong>“&gt;=”</strong>:
Higher values indicate positive outcome (default) -
<strong>“&lt;=”</strong>: Lower values indicate positive outcome</p>
</div>
<div class="section level3">
<h3 id="prior-strength-sensitivity-analysis">Prior Strength Sensitivity Analysis<a class="anchor" aria-label="anchor" href="#prior-strength-sensitivity-analysis"></a>
</h3>
<p>Explore the impact of different prior specifications:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Weak prior (default)</span></span>
<span><span class="fu">bayesdca</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">mydata</span>,</span>
<span>  outcomes <span class="op">=</span> <span class="st">"Death"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="st">"Age"</span>,</span>
<span>  priorStrength <span class="op">=</span> <span class="fl">2</span>,      <span class="co"># Weak prior</span></span>
<span>  bayesianAnalysis <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Strong prior (more conservative)</span></span>
<span><span class="fu">bayesdca</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">mydata</span>,</span>
<span>  outcomes <span class="op">=</span> <span class="st">"Death"</span>, </span>
<span>  predictors <span class="op">=</span> <span class="st">"Age"</span>,</span>
<span>  priorStrength <span class="op">=</span> <span class="fl">10</span>,     <span class="co"># Strong prior</span></span>
<span>  bayesianAnalysis <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Prior Strength Guide:</strong> - <strong>0.5-2</strong>: Very
weak prior (data-driven) - <strong>2-5</strong>: Weak prior (default
range) - <strong>5-10</strong>: Moderate prior (conservative) -
<strong>&gt;10</strong>: Strong prior (very conservative)</p>
</div>
</div>
<div class="section level2">
<h2 id="comprehensive-clinical-example">Comprehensive Clinical Example<a class="anchor" aria-label="anchor" href="#comprehensive-clinical-example"></a>
</h2>
<div class="section level3">
<h3 id="scenario-cancer-treatment-decision-model">Scenario: Cancer Treatment Decision Model<a class="anchor" aria-label="anchor" href="#scenario-cancer-treatment-decision-model"></a>
</h3>
<p>Let’s work through a complete analysis for a cancer treatment
decision model:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Comprehensive cancer treatment decision analysis</span></span>
<span><span class="va">cancer_dca</span> <span class="op">&lt;-</span> <span class="fu">bayesdca</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">mydata</span>,</span>
<span>  </span>
<span>  <span class="co"># Core variables</span></span>
<span>  outcomes <span class="op">=</span> <span class="st">"Death"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Age"</span>, <span class="st">"TStage"</span>, <span class="st">"MeasurementA"</span>, <span class="st">"MeasurementB"</span><span class="op">)</span>,</span>
<span>  </span>
<span>  <span class="co"># Threshold settings (5% to 40% - typical for cancer treatment)</span></span>
<span>  thresholdMin <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  thresholdMax <span class="op">=</span> <span class="fl">0.40</span>,</span>
<span>  thresholdPoints <span class="op">=</span> <span class="fl">35</span>,</span>
<span>  </span>
<span>  <span class="co"># Bayesian analysis with EVPI</span></span>
<span>  bayesianAnalysis <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  nDraws <span class="op">=</span> <span class="fl">3000</span>,</span>
<span>  priorStrength <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  calculateEVPI <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  </span>
<span>  <span class="co"># External prevalence (if applicable)</span></span>
<span>  useExternalPrevalence <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  </span>
<span>  <span class="co"># Classification direction</span></span>
<span>  directionIndicator <span class="op">=</span> <span class="st">"&gt;="</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="interpreting-the-results">Interpreting the Results<a class="anchor" aria-label="anchor" href="#interpreting-the-results"></a>
</h4>
<p><strong>1. Main Decision Curves:</strong> - Shows net benefit for
each strategy across thresholds - Curves above “treat none” and “treat
all” indicate clinical utility - Higher curves = better clinical
performance</p>
<p><strong>2. Net Benefit Differences:</strong> - Shows improvement over
default strategies (treat all/none) - Positive values indicate
beneficial use of the model - Confidence bands show uncertainty in
benefit</p>
<p><strong>3. Probability of Superiority:</strong> - Bayesian
probability each strategy is optimal - Helps identify threshold ranges
where models are most reliable - Values &gt;80% suggest strong evidence
for superiority</p>
<p><strong>4. Expected Value of Perfect Information:</strong> - Maximum
benefit of reducing uncertainty through research - High EVPI suggests
value in additional studies - Can inform research prioritization and
funding decisions</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="parameter-reference-guide">Parameter Reference Guide<a class="anchor" aria-label="anchor" href="#parameter-reference-guide"></a>
</h2>
<div class="section level3">
<h3 id="core-parameters">Core Parameters<a class="anchor" aria-label="anchor" href="#core-parameters"></a>
</h3>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">bayesdca</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">mydata</span>,                    <span class="co"># Required: Data frame</span></span>
<span>  </span>
<span>  <span class="co"># Required variables</span></span>
<span>  outcomes <span class="op">=</span> <span class="st">"Death"</span>,               <span class="co"># Binary outcome (0/1 or factor)</span></span>
<span>  outcomePos <span class="op">=</span> <span class="st">"Yes"</span>,              <span class="co"># Positive level (if factor)</span></span>
<span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Age"</span>, <span class="st">"Test1"</span><span class="op">)</span>,   <span class="co"># Models/tests to evaluate</span></span>
<span>  </span>
<span>  <span class="co"># Threshold settings</span></span>
<span>  thresholdMin <span class="op">=</span> <span class="fl">0.01</span>,             <span class="co"># Minimum threshold (0.1-50%)</span></span>
<span>  thresholdMax <span class="op">=</span> <span class="fl">0.50</span>,             <span class="co"># Maximum threshold (1-99%)</span></span>
<span>  thresholdPoints <span class="op">=</span> <span class="fl">50</span>,            <span class="co"># Number of evaluation points</span></span>
<span>  </span>
<span>  <span class="co"># Analysis type</span></span>
<span>  bayesianAnalysis <span class="op">=</span> <span class="cn">TRUE</span>,         <span class="co"># TRUE=Bayesian, FALSE=Frequentist</span></span>
<span>  </span>
<span>  <span class="co"># Bayesian settings</span></span>
<span>  nDraws <span class="op">=</span> <span class="fl">2000</span>,                   <span class="co"># Posterior draws (500-10000)</span></span>
<span>  priorStrength <span class="op">=</span> <span class="fl">2</span>,               <span class="co"># Prior strength (0.1-10)</span></span>
<span>  calculateEVPI <span class="op">=</span> <span class="cn">FALSE</span>,           <span class="co"># Enable EVPI calculation</span></span>
<span>  </span>
<span>  <span class="co"># Frequentist settings  </span></span>
<span>  bootstrapCI <span class="op">=</span> <span class="cn">TRUE</span>,              <span class="co"># Bootstrap confidence intervals</span></span>
<span>  bootstrapReps <span class="op">=</span> <span class="fl">2000</span>,            <span class="co"># Bootstrap replications</span></span>
<span>  </span>
<span>  <span class="co"># External prevalence</span></span>
<span>  useExternalPrevalence <span class="op">=</span> <span class="cn">FALSE</span>,   <span class="co"># Use external prevalence data</span></span>
<span>  externalCases <span class="op">=</span> <span class="fl">100</span>,             <span class="co"># Cases in external data</span></span>
<span>  externalTotal <span class="op">=</span> <span class="fl">500</span>,             <span class="co"># Total in external data</span></span>
<span>  </span>
<span>  <span class="co"># Technical settings</span></span>
<span>  directionIndicator <span class="op">=</span> <span class="st">"&gt;="</span>        <span class="co"># Prediction direction</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="parameter-selection-guidelines">Parameter Selection Guidelines<a class="anchor" aria-label="anchor" href="#parameter-selection-guidelines"></a>
</h3>
<div class="section level4">
<h4 id="threshold-range-selection">
<strong>Threshold Range Selection</strong><a class="anchor" aria-label="anchor" href="#threshold-range-selection"></a>
</h4>
<table class="table">
<thead><tr class="header">
<th>Clinical Scenario</th>
<th>Suggested Range</th>
<th>Rationale</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>Cancer Screening</strong></td>
<td>1-10%</td>
<td>Missing cancer is very harmful</td>
</tr>
<tr class="even">
<td><strong>Preventive Treatment</strong></td>
<td>5-20%</td>
<td>Moderate intervention risks</td>
</tr>
<tr class="odd">
<td><strong>Major Surgery</strong></td>
<td>20-50%</td>
<td>High intervention risks</td>
</tr>
<tr class="even">
<td><strong>Emergency Decisions</strong></td>
<td>1-15%</td>
<td>Time-sensitive, err on caution</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="analysis-type-selection">
<strong>Analysis Type Selection</strong><a class="anchor" aria-label="anchor" href="#analysis-type-selection"></a>
</h4>
<table class="table">
<thead><tr class="header">
<th>Choose <strong>Bayesian</strong> when:</th>
<th>Choose <strong>Frequentist</strong> when:</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Want probability statements</td>
<td>Prefer traditional CI interpretation</td>
</tr>
<tr class="even">
<td>Need EVPI calculations</td>
<td>Simpler interpretation required</td>
</tr>
<tr class="odd">
<td>Have prior information</td>
<td>Want to avoid prior specification</td>
</tr>
<tr class="even">
<td>Decision uncertainty matters</td>
<td>Bootstrap approach preferred</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="sample-size-considerations">
<strong>Sample Size Considerations</strong><a class="anchor" aria-label="anchor" href="#sample-size-considerations"></a>
</h4>
<table class="table">
<thead><tr class="header">
<th>Sample Size</th>
<th>Recommended Settings</th>
<th>Notes</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>n &lt; 100</strong></td>
<td>priorStrength = 5-10</td>
<td>Use stronger priors</td>
</tr>
<tr class="even">
<td><strong>100 ≤ n &lt; 500</strong></td>
<td>priorStrength = 2-5</td>
<td>Moderate priors</td>
</tr>
<tr class="odd">
<td><strong>n ≥ 500</strong></td>
<td>priorStrength = 1-2</td>
<td>Weak priors, data-driven</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section level2">
<h2 id="interpretation-guidelines">Interpretation Guidelines<a class="anchor" aria-label="anchor" href="#interpretation-guidelines"></a>
</h2>
<div class="section level3">
<h3 id="understanding-net-benefit-curves">Understanding Net Benefit Curves<a class="anchor" aria-label="anchor" href="#understanding-net-benefit-curves"></a>
</h3>
<div class="section level4">
<h4 id="curve-interpretation">
<strong>Curve Interpretation</strong><a class="anchor" aria-label="anchor" href="#curve-interpretation"></a>
</h4>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example showing different curve patterns</span></span>
<span><span class="co"># (This would be actual analysis output in practice)</span></span>
<span></span>
<span><span class="co"># Pattern 1: Clear winner</span></span>
<span><span class="co"># One model consistently above others</span></span>
<span><span class="co"># Interpretation: Strong evidence for using this model</span></span>
<span></span>
<span><span class="co"># Pattern 2: Threshold-dependent</span></span>
<span><span class="co"># Different models optimal at different thresholds  </span></span>
<span><span class="co"># Interpretation: Threshold selection matters</span></span>
<span></span>
<span><span class="co"># Pattern 3: Minimal differences</span></span>
<span><span class="co"># All models similar performance</span></span>
<span><span class="co"># Interpretation: Simple approaches may suffice</span></span>
<span></span>
<span><span class="co"># Pattern 4: No benefit</span></span>
<span><span class="co"># All models below treat all/none</span></span>
<span><span class="co"># Interpretation: Models not clinically useful</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="clinical-decision-rules">
<strong>Clinical Decision Rules</strong><a class="anchor" aria-label="anchor" href="#clinical-decision-rules"></a>
</h4>
<p><strong>When to Use a Model:</strong> 1. Model curve is <strong>above
both “treat all” and “treat none”</strong> 2. Net benefit difference is
<strong>clinically meaningful</strong> (e.g., &gt;0.01) 3.
<strong>Confidence/credible intervals</strong> don’t include zero
benefit 4. <strong>Probability of superiority</strong> &gt;80% in
relevant threshold range</p>
<p><strong>When NOT to Use a Model:</strong> 1. Model performs
<strong>worse than simple strategies</strong> 2. <strong>High
uncertainty</strong> with wide confidence intervals 3. <strong>EVPI is
very high</strong> - need more research first 4. <strong>Benefit is
minimal</strong> relative to implementation costs</p>
</div>
</div>
<div class="section level3">
<h3 id="statistical-significance-vs-clinical-utility">Statistical Significance vs Clinical Utility<a class="anchor" aria-label="anchor" href="#statistical-significance-vs-clinical-utility"></a>
</h3>
<p><strong>Traditional Metrics vs DCA:</strong></p>
<table class="table">
<colgroup>
<col width="60%">
<col width="40%">
</colgroup>
<thead><tr class="header">
<th>Traditional Approach</th>
<th>DCA Approach</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>AUC = 0.75</strong></td>
<td>“What’s the net benefit at my decision threshold?”</td>
</tr>
<tr class="even">
<td><strong>p &lt; 0.05</strong></td>
<td>“Is the improvement clinically meaningful?”</td>
</tr>
<tr class="odd">
<td><strong>Sensitivity = 85%</strong></td>
<td>“Does this lead to better decisions?”</td>
</tr>
<tr class="even">
<td><strong>95% CI excludes 1.0</strong></td>
<td>“What’s the probability this strategy is best?”</td>
</tr>
</tbody>
</table>
<p><strong>Key Point</strong>: A statistically significant model may
have <strong>no clinical utility</strong> if the net benefit improvement
is negligible.</p>
</div>
</div>
<div class="section level2">
<h2 id="clinical-application-examples">Clinical Application Examples<a class="anchor" aria-label="anchor" href="#clinical-application-examples"></a>
</h2>
<div class="section level3">
<h3 id="example-1-cancer-screening-program">Example 1: Cancer Screening Program<a class="anchor" aria-label="anchor" href="#example-1-cancer-screening-program"></a>
</h3>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Evaluate biomarker panel for cancer screening</span></span>
<span><span class="va">screening_analysis</span> <span class="op">&lt;-</span> <span class="fu">bayesdca</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">screening_cohort</span>,</span>
<span>  outcomes <span class="op">=</span> <span class="st">"Cancer"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Biomarker_Panel"</span>, <span class="st">"Clinical_Score"</span>, <span class="st">"Imaging_Result"</span><span class="op">)</span>,</span>
<span>  </span>
<span>  <span class="co"># Low thresholds appropriate for screening</span></span>
<span>  thresholdMin <span class="op">=</span> <span class="fl">0.01</span>,     <span class="co"># 1% - very sensitive</span></span>
<span>  thresholdMax <span class="op">=</span> <span class="fl">0.10</span>,     <span class="co"># 10% - still screening range</span></span>
<span>  thresholdPoints <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  </span>
<span>  bayesianAnalysis <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  calculateEVPI <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  </span>
<span>  <span class="co"># External prevalence from cancer registry</span></span>
<span>  useExternalPrevalence <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  externalCases <span class="op">=</span> <span class="fl">50</span>,      <span class="co"># Registry cancer rate</span></span>
<span>  externalTotal <span class="op">=</span> <span class="fl">1000</span>     <span class="co"># Registry population</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Key Questions:</strong> - At what threshold should we
recommend further testing? - Is the biomarker panel worth the additional
cost? - Should we implement this in a screening program?</p>
</div>
<div class="section level3">
<h3 id="example-2-treatment-selection-model">Example 2: Treatment Selection Model<a class="anchor" aria-label="anchor" href="#example-2-treatment-selection-model"></a>
</h3>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Personalized treatment selection model</span></span>
<span><span class="va">treatment_analysis</span> <span class="op">&lt;-</span> <span class="fu">bayesdca</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">treatment_cohort</span>,</span>
<span>  outcomes <span class="op">=</span> <span class="st">"TreatmentFailure"</span>, </span>
<span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"GenomicScore"</span>, <span class="st">"ClinicalModel"</span>, <span class="st">"Combined_Score"</span><span class="op">)</span>,</span>
<span>  </span>
<span>  <span class="co"># Moderate thresholds for treatment decisions</span></span>
<span>  thresholdMin <span class="op">=</span> <span class="fl">0.15</span>,     <span class="co"># 15% - consider treatment</span></span>
<span>  thresholdMax <span class="op">=</span> <span class="fl">0.45</span>,     <span class="co"># 45% - high-risk threshold</span></span>
<span>  thresholdPoints <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  </span>
<span>  bayesianAnalysis <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  priorStrength <span class="op">=</span> <span class="fl">3</span>,       <span class="co"># Moderate prior for treatment</span></span>
<span>  calculateEVPI <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Key Questions:</strong> - Which patients should receive
intensive treatment? - Is genomic testing worth the cost for treatment
selection? - What threshold should guide treatment decisions?</p>
</div>
<div class="section level3">
<h3 id="example-3-diagnostic-test-evaluation">Example 3: Diagnostic Test Evaluation<a class="anchor" aria-label="anchor" href="#example-3-diagnostic-test-evaluation"></a>
</h3>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compare diagnostic tests for rapid diagnosis</span></span>
<span><span class="va">diagnostic_analysis</span> <span class="op">&lt;-</span> <span class="fu">bayesdca</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">diagnostic_cohort</span>,</span>
<span>  outcomes <span class="op">=</span> <span class="st">"Disease"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Rapid_Test"</span>, <span class="st">"Standard_Test"</span>, <span class="st">"Combined_Tests"</span><span class="op">)</span>,</span>
<span>  </span>
<span>  <span class="co"># Broad threshold range for diagnostic evaluation</span></span>
<span>  thresholdMin <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  thresholdMax <span class="op">=</span> <span class="fl">0.50</span>,</span>
<span>  thresholdPoints <span class="op">=</span> <span class="fl">45</span>,</span>
<span>  </span>
<span>  bayesianAnalysis <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  calculateEVPI <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  </span>
<span>  <span class="co"># Direction: positive test results indicate disease</span></span>
<span>  directionIndicator <span class="op">=</span> <span class="st">"&gt;="</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Key Questions:</strong> - Should we replace the standard test
with the rapid test? - At what probability should we initiate treatment?
- Is the combined approach worth the additional complexity?</p>
</div>
</div>
<div class="section level2">
<h2 id="advanced-topics">Advanced Topics<a class="anchor" aria-label="anchor" href="#advanced-topics"></a>
</h2>
<div class="section level3">
<h3 id="handling-complex-prediction-models">Handling Complex Prediction Models<a class="anchor" aria-label="anchor" href="#handling-complex-prediction-models"></a>
</h3>
<div class="section level4">
<h4 id="probability-calibration">
<strong>Probability Calibration</strong><a class="anchor" aria-label="anchor" href="#probability-calibration"></a>
</h4>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For machine learning models, ensure probabilities are well-calibrated</span></span>
<span><span class="co"># before DCA analysis</span></span>
<span></span>
<span><span class="co"># Example with logistic regression calibration</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://hbiostat.org/R/rms/" class="external-link">rms</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calibrate predictions</span></span>
<span><span class="va">calibrated_probs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">calibration_model</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use calibrated probabilities in DCA</span></span>
<span><span class="fu">bayesdca</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">mydata</span>,</span>
<span>  outcomes <span class="op">=</span> <span class="st">"Death"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="st">"calibrated_probs"</span>,</span>
<span>  thresholdMin <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  thresholdMax <span class="op">=</span> <span class="fl">0.40</span>,</span>
<span>  bayesianAnalysis <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="multi-class-outcomes">
<strong>Multi-class Outcomes</strong><a class="anchor" aria-label="anchor" href="#multi-class-outcomes"></a>
</h4>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For outcomes with multiple categories, create binary versions</span></span>
<span><span class="va">mydata_binary</span> <span class="op">&lt;-</span> <span class="va">mydata</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    Death_vs_Others <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">Outcome</span> <span class="op">==</span> <span class="st">"Death"</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>    Progression_vs_Others <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">Outcome</span> <span class="op">==</span> <span class="st">"Progression"</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Analyze each binary outcome separately</span></span>
<span><span class="fu">bayesdca</span><span class="op">(</span>data <span class="op">=</span> <span class="va">mydata_binary</span>, outcomes <span class="op">=</span> <span class="st">"Death_vs_Others"</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">bayesdca</span><span class="op">(</span>data <span class="op">=</span> <span class="va">mydata_binary</span>, outcomes <span class="op">=</span> <span class="st">"Progression_vs_Others"</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="model-validation-considerations">Model Validation Considerations<a class="anchor" aria-label="anchor" href="#model-validation-considerations"></a>
</h3>
<div class="section level4">
<h4 id="cross-validation-strategy">
<strong>Cross-validation Strategy</strong><a class="anchor" aria-label="anchor" href="#cross-validation-strategy"></a>
</h4>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For internal validation, use cross-validation</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://xrobin.github.io/pROC/" class="external-link">pROC</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Example 5-fold cross-validation</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">folds</span> <span class="op">&lt;-</span> <span class="fu">createFolds</span><span class="op">(</span><span class="va">mydata</span><span class="op">$</span><span class="va">Death</span>, k <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cv_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">train_data</span> <span class="op">&lt;-</span> <span class="va">mydata</span><span class="op">[</span><span class="op">-</span><span class="va">folds</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span>, <span class="op">]</span></span>
<span>  <span class="va">test_data</span> <span class="op">&lt;-</span> <span class="va">mydata</span><span class="op">[</span><span class="va">folds</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span>, <span class="op">]</span></span>
<span>  </span>
<span>  <span class="co"># Fit model on training data</span></span>
<span>  <span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">Death</span> <span class="op">~</span> <span class="va">Age</span> <span class="op">+</span> <span class="va">MeasurementA</span>, data <span class="op">=</span> <span class="va">train_data</span>, family <span class="op">=</span> <span class="va">binomial</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Predict on test data</span></span>
<span>  <span class="va">test_data</span><span class="op">$</span><span class="va">predictions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">model</span>, <span class="va">test_data</span>, type <span class="op">=</span> <span class="st">"response"</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Run DCA on test predictions</span></span>
<span>  <span class="va">cv_results</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu">bayesdca</span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">test_data</span>,</span>
<span>    outcomes <span class="op">=</span> <span class="st">"Death"</span>, </span>
<span>    predictors <span class="op">=</span> <span class="st">"predictions"</span>,</span>
<span>    bayesianAnalysis <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="external-validation">
<strong>External Validation</strong><a class="anchor" aria-label="anchor" href="#external-validation"></a>
</h4>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For external validation on independent dataset</span></span>
<span><span class="va">external_results</span> <span class="op">&lt;-</span> <span class="fu">bayesdca</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">external_cohort</span>,</span>
<span>  outcomes <span class="op">=</span> <span class="st">"Death"</span>,</span>
<span>  predictors <span class="op">=</span> <span class="st">"model_predictions"</span>,  <span class="co"># From original model</span></span>
<span>  </span>
<span>  <span class="co"># May need different threshold range</span></span>
<span>  thresholdMin <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  thresholdMax <span class="op">=</span> <span class="fl">0.35</span>,</span>
<span>  </span>
<span>  <span class="co"># Account for different prevalence</span></span>
<span>  useExternalPrevalence <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  externalCases <span class="op">=</span> <span class="va">external_cases</span>,</span>
<span>  externalTotal <span class="op">=</span> <span class="va">external_total</span>,</span>
<span>  </span>
<span>  bayesianAnalysis <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="cost-effectiveness-integration">Cost-Effectiveness Integration<a class="anchor" aria-label="anchor" href="#cost-effectiveness-integration"></a>
</h3>
<div class="section level4">
<h4 id="incorporating-costs">
<strong>Incorporating Costs</strong><a class="anchor" aria-label="anchor" href="#incorporating-costs"></a>
</h4>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># DCA can be extended to include costs</span></span>
<span><span class="co"># Net benefit becomes: NB = (TP × Benefit - FP × Harm) / Cost</span></span>
<span></span>
<span><span class="co"># Example: Modify net benefit calculation for cost-effectiveness</span></span>
<span><span class="co"># This would require custom calculation outside the standard DCA framework</span></span>
<span></span>
<span><span class="va">cost_adjusted_analysis</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">dca_results</span>, <span class="va">intervention_cost</span>, <span class="va">harm_cost</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Custom function to adjust net benefit for costs</span></span>
<span>  <span class="co"># Implementation would depend on specific cost structure</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="troubleshooting-and-best-practices">Troubleshooting and Best Practices<a class="anchor" aria-label="anchor" href="#troubleshooting-and-best-practices"></a>
</h2>
<div class="section level3">
<h3 id="common-issues-and-solutions">Common Issues and Solutions<a class="anchor" aria-label="anchor" href="#common-issues-and-solutions"></a>
</h3>
<div class="section level4">
<h4 id="data-preparation-issues">
<strong>Data Preparation Issues</strong><a class="anchor" aria-label="anchor" href="#data-preparation-issues"></a>
</h4>
<p><strong>Problem</strong>: Outcome variable not properly coded</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Solution: Ensure binary coding</span></span>
<span><span class="va">mydata</span><span class="op">$</span><span class="va">outcome_binary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">$</span><span class="va">Outcome</span> <span class="op">==</span> <span class="st">"Event"</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span>
<span><span class="co"># Or specify positive level for factors</span></span>
<span><span class="fu">bayesdca</span><span class="op">(</span><span class="va">...</span>, outcomes <span class="op">=</span> <span class="st">"Status"</span>, outcomePos <span class="op">=</span> <span class="st">"Dead"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Problem</strong>: Prediction probabilities outside [0,1]
range</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Solution: Check and constrain predictions</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">$</span><span class="va">predictions</span><span class="op">)</span></span>
<span><span class="va">mydata</span><span class="op">$</span><span class="va">predictions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">$</span><span class="va">predictions</span>, <span class="fl">0.001</span><span class="op">)</span>, <span class="fl">0.999</span><span class="op">)</span></span></code></pre></div>
<p><strong>Problem</strong>: Missing values in predictors</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Solution: Handle missing values appropriately</span></span>
<span><span class="co"># Remove cases with missing predictors</span></span>
<span><span class="va">complete_data</span> <span class="op">&lt;-</span> <span class="va">mydata</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/stats/complete.cases.html" class="external-link">complete.cases</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"outcome"</span>, <span class="st">"predictor1"</span>, <span class="st">"predictor2"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># Or impute missing values (use appropriate method)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/amices/mice" class="external-link">mice</a></span><span class="op">)</span></span>
<span><span class="va">imputed_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/complete.html" class="external-link">complete</a></span><span class="op">(</span><span class="fu"><a href="https://amices.org/mice/reference/mice.html" class="external-link">mice</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="threshold-selection-issues">
<strong>Threshold Selection Issues</strong><a class="anchor" aria-label="anchor" href="#threshold-selection-issues"></a>
</h4>
<p><strong>Problem</strong>: Unclear what threshold range to use</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Solution: Use clinical guidelines or literature</span></span>
<span><span class="co"># For cancer: often 5-20%</span></span>
<span><span class="co"># For screening: often 1-10% </span></span>
<span><span class="co"># For surgery: often 20-50%</span></span>
<span></span>
<span><span class="co"># Start broad and narrow based on results</span></span>
<span><span class="fu">bayesdca</span><span class="op">(</span><span class="va">...</span>, thresholdMin <span class="op">=</span> <span class="fl">0.01</span>, thresholdMax <span class="op">=</span> <span class="fl">0.50</span><span class="op">)</span></span></code></pre></div>
<p><strong>Problem</strong>: All models perform similarly</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Solutions:</span></span>
<span><span class="co"># 1. Check if sample size is adequate</span></span>
<span><span class="co"># 2. Consider if models are actually different</span></span>
<span><span class="co"># 3. Look at EVPI - high values suggest more research needed</span></span>
<span><span class="co"># 4. Focus on interpretability and implementation costs</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="interpretation-challenges">
<strong>Interpretation Challenges</strong><a class="anchor" aria-label="anchor" href="#interpretation-challenges"></a>
</h4>
<p><strong>Problem</strong>: Negative net benefit values</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This is normal and expected!</span></span>
<span><span class="co"># Net benefit can be negative - it just means the strategy</span></span>
<span><span class="co"># performs worse than "treat none"</span></span>
<span><span class="co"># Focus on relative differences between strategies</span></span></code></pre></div>
<p><strong>Problem</strong>: Very wide confidence intervals</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Solutions:</span></span>
<span><span class="co"># 1. Increase sample size if possible</span></span>
<span><span class="co"># 2. Use stronger priors (increase priorStrength)</span></span>
<span><span class="co"># 3. Consider if more research is needed (check EVPI)</span></span>
<span><span class="co"># 4. Focus on threshold ranges with narrow intervals</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="performance-optimization">Performance Optimization<a class="anchor" aria-label="anchor" href="#performance-optimization"></a>
</h3>
<div class="section level4">
<h4 id="large-dataset-handling">
<strong>Large Dataset Handling</strong><a class="anchor" aria-label="anchor" href="#large-dataset-handling"></a>
</h4>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For large datasets (&gt;10,000 observations)</span></span>
<span><span class="co"># Consider reducing computational burden</span></span>
<span></span>
<span><span class="co"># Reduce posterior draws for initial exploration</span></span>
<span><span class="fu">bayesdca</span><span class="op">(</span><span class="va">...</span>, nDraws <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span>  <span class="co"># Instead of 2000+</span></span>
<span></span>
<span><span class="co"># Reduce threshold points for initial analysis</span></span>
<span><span class="fu">bayesdca</span><span class="op">(</span><span class="va">...</span>, thresholdPoints <span class="op">=</span> <span class="fl">20</span><span class="op">)</span>  <span class="co"># Instead of 50+</span></span>
<span></span>
<span><span class="co"># Use frequentist approach for speed</span></span>
<span><span class="fu">bayesdca</span><span class="op">(</span><span class="va">...</span>, bayesianAnalysis <span class="op">=</span> <span class="cn">FALSE</span>, bootstrapCI <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="memory-management">
<strong>Memory Management</strong><a class="anchor" aria-label="anchor" href="#memory-management"></a>
</h4>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For memory-intensive analyses</span></span>
<span><span class="co"># Clean up intermediate objects</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/gc.html" class="external-link">gc</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use data.table for large datasets</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/setDT.html" class="external-link">setDT</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="integration-with-clinicopath-workflow">Integration with ClinicoPath Workflow<a class="anchor" aria-label="anchor" href="#integration-with-clinicopath-workflow"></a>
</h2>
<div class="section level3">
<h3 id="recommended-analysis-sequence">Recommended Analysis Sequence<a class="anchor" aria-label="anchor" href="#recommended-analysis-sequence"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<strong>Exploratory Analysis</strong>: Use other ClinicoPath modules
for initial exploration</li>
<li>
<strong>Model Development</strong>: Develop prediction models using
appropriate methods</li>
<li>
<strong>Performance Evaluation</strong>: Assess discrimination (ROC
analysis)</li>
<li>
<strong>Clinical Utility</strong>: Use Bayesian DCA to evaluate
real-world utility</li>
<li>
<strong>Implementation Planning</strong>: Use EVPI and cost
considerations for decisions</li>
</ol>
</div>
<div class="section level3">
<h3 id="complement-with-other-modules">Complement with Other Modules<a class="anchor" aria-label="anchor" href="#complement-with-other-modules"></a>
</h3>
<div class="section level4">
<h4 id="roc-analysis-first">
<strong>ROC Analysis First</strong><a class="anchor" aria-label="anchor" href="#roc-analysis-first"></a>
</h4>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Step 1: Traditional ROC analysis</span></span>
<span><span class="va">roc_analysis</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/pROC/man/roc.html" class="external-link">roc</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mydata</span>, outcomes <span class="op">=</span> <span class="st">"Death"</span>, predictors <span class="op">=</span> <span class="st">"Age"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Step 2: Decision curve analysis for clinical utility</span></span>
<span><span class="va">dca_analysis</span> <span class="op">&lt;-</span> <span class="fu">bayesdca</span><span class="op">(</span>data <span class="op">=</span> <span class="va">mydata</span>, outcomes <span class="op">=</span> <span class="st">"Death"</span>, predictors <span class="op">=</span> <span class="st">"Age"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="decision-trees-for-implementation">
<strong>Decision Trees for Implementation</strong><a class="anchor" aria-label="anchor" href="#decision-trees-for-implementation"></a>
</h4>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Use decision tree analysis for implementation planning</span></span>
<span><span class="co"># after DCA shows clinical utility</span></span>
<span><span class="va">decision_tree_analysis</span> <span class="op">&lt;-</span> <span class="fu">decisiongraph</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="cost-effectiveness-analysis">
<strong>Cost-Effectiveness Analysis</strong><a class="anchor" aria-label="anchor" href="#cost-effectiveness-analysis"></a>
</h4>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Integrate DCA results with cost-effectiveness models</span></span>
<span><span class="co"># for full economic evaluation</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="reporting-guidelines">Reporting Guidelines<a class="anchor" aria-label="anchor" href="#reporting-guidelines"></a>
</h2>
<div class="section level3">
<h3 id="essential-elements-for-publication">Essential Elements for Publication<a class="anchor" aria-label="anchor" href="#essential-elements-for-publication"></a>
</h3>
<div class="section level4">
<h4 id="methods-section">
<strong>Methods Section</strong><a class="anchor" aria-label="anchor" href="#methods-section"></a>
</h4>
<ul>
<li>Specify analysis type (Bayesian vs Frequentist)</li>
<li>Report threshold range and rationale</li>
<li>Describe prior specification (if Bayesian)</li>
<li>Report software version and settings</li>
</ul>
</div>
<div class="section level4">
<h4 id="results-section">
<strong>Results Section</strong><a class="anchor" aria-label="anchor" href="#results-section"></a>
</h4>
<ul>
<li>Present main decision curves with confidence intervals</li>
<li>Report net benefit at clinically relevant thresholds</li>
<li>Include probability of superiority (if Bayesian)</li>
<li>Report EVPI if calculated</li>
</ul>
</div>
<div class="section level4">
<h4 id="interpretation-guidelines-1">
<strong>Interpretation Guidelines</strong><a class="anchor" aria-label="anchor" href="#interpretation-guidelines-1"></a>
</h4>
<ul>
<li>Focus on clinical meaningfulness, not just statistical
significance</li>
<li>Discuss threshold-dependent findings</li>
<li>Address uncertainty and need for additional research</li>
<li>Consider implementation costs and barriers</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="figure-quality">Figure Quality<a class="anchor" aria-label="anchor" href="#figure-quality"></a>
</h3>
<div class="section level4">
<h4 id="publication-ready-plots">
<strong>Publication-Ready Plots</strong><a class="anchor" aria-label="anchor" href="#publication-ready-plots"></a>
</h4>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The Bayesian DCA module produces publication-ready plots</span></span>
<span><span class="co"># with proper formatting:</span></span>
<span><span class="co"># - Professional color schemes</span></span>
<span><span class="co"># - Percentage formatting for thresholds  </span></span>
<span><span class="co"># - Appropriate confidence bands</span></span>
<span><span class="co"># - Clear legends and labels</span></span>
<span></span>
<span><span class="co"># Plots can be exported at high resolution for publications</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>Bayesian Decision Curve Analysis represents a sophisticated approach
to evaluating the clinical utility of prediction models and diagnostic
tests. By focusing on real-world decision making rather than just
statistical performance, DCA provides crucial insights for clinical
implementation.</p>
<div class="section level3">
<h3 id="key-takeaways">Key Takeaways<a class="anchor" aria-label="anchor" href="#key-takeaways"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<strong>Clinical Utility Matters</strong>: A statistically
significant model may have no clinical benefit</li>
<li>
<strong>Thresholds Are Critical</strong>: Performance varies
dramatically across decision thresholds</li>
<li>
<strong>Uncertainty Quantification</strong>: Bayesian approaches
provide richer uncertainty information</li>
<li>
<strong>Research Prioritization</strong>: EVPI helps identify where
additional research is most valuable</li>
<li>
<strong>Implementation Focus</strong>: DCA directly addresses
“should we use this in practice?”</li>
</ol>
</div>
<div class="section level3">
<h3 id="when-dca-changes-clinical-practice">When DCA Changes Clinical Practice<a class="anchor" aria-label="anchor" href="#when-dca-changes-clinical-practice"></a>
</h3>
<ul>
<li>
<strong>Identifies optimal decision thresholds</strong> for existing
interventions</li>
<li>
<strong>Prevents implementation</strong> of models with no clinical
utility despite good discrimination</li>
<li>
<strong>Guides resource allocation</strong> by quantifying value of
additional research</li>
<li>
<strong>Supports evidence-based policy</strong> for screening and
diagnostic programs</li>
<li>
<strong>Enables personalized medicine</strong> by identifying
patient subgroups who benefit most</li>
</ul>
<p>The ClinicoPath Bayesian DCA module provides a comprehensive toolkit
for this sophisticated analysis, making advanced decision-theoretic
methods accessible to clinical researchers and supporting evidence-based
implementation of prediction models in healthcare.</p>
<hr>
<p><em>This comprehensive guide demonstrates the full capabilities of
Bayesian Decision Curve Analysis in the ClinicoPath module, providing
researchers with the tools and knowledge needed to evaluate clinical
utility and guide evidence-based implementation of prediction models and
diagnostic tests.</em></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Serdar Balci.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
