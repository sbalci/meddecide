---
name: psychopdaroc
title: ROC Analysis
menuGroup: meddecide
menuSubgroup: ROC Analysis
menuSubtitle: ROC Analysis, AUC, Cutpoints
version: '0.0.3'
jas: '1.2'

description:
    main: >
        Receiver Operating Characteristic (ROC) curve analysis with optimal cutpoint determination.


options:
    - name: data
      type: Data
      description:
          R: The data as a data frame.

    - name: dependentVars
      title: Dependent Variable
      type: Variables
      suggested:
        - continuous
      permitted:
        - numeric
      description:
          R: >
            Variable(s) to be tested for classification performance.



    - name: classVar
      title: Class Variable
      type: Variable
      suggested:
        - nominal
      permitted:
        - factor
      description:
          R: >
            Binary classification variable (gold standard).


    - name: positiveClass
      title: Positive Class
      type: Level
      variable: (classVar)
      description:
          ui: >
            Select which level of the class variable should be treated as the positive class.
          R: >
            Specifies which level of the class variable should be treated as the positive class.


    - name: subGroup
      title: Group Variable
      type: Variable
      suggested:
        - nominal
      permitted:
        - factor
      description:
          R: >
            Optional variable for subgroup analysis.

    - name: method
      title: Method
      type: List
      options:
        - name: oc_manual
          title: "Custom cut score"
        - name: maximize_metric
          title: Maximize metric
        - name: minimize_metric
          title: Minimize metric
        - name: maximize_loess_metric
          title: Maximize metric (LOESS)
        - name: minimize_loess_metric
          title: Minimize metric (LOESS)
        - name: maximize_spline_metric
          title: Maximize metric (spline)
        - name: minimize_spline_metric
          title: Minimize metric (spline)
        - name: maximize_boot_metric
          title: Maximize metric (bootstrap)
        - name: minimize_boot_metric
          title: Minimize metric (bootstrap)
        - name: oc_youden_kernel
          title: "Maximize Youden-Index (Kernel smoothed)"
        - name: oc_youden_normal
          title: "Maximize Youden-Index (Parametric normal)"

        - name: oc_cost_ratio
          title: "Cost-ratio optimized"
        - name: oc_equal_sens_spec
          title: "Equal sensitivity and specificity"
        - name: oc_closest_01
          title: "Closest to (0,1) point"

      default: maximize_metric
      description:
          R: >
            Method to determine optimal cut point.

    - name: allObserved
      title: All observed scores
      type: Bool
      default: false
      description:
          R: >
            Show all observed scores in results table.

    - name: specifyCutScore
      title: Specify cut score
      type: String
      default: ""
      description:
          R: >
            Specify custom cut score when using manual method.

    - name: metric
      title: Metric
      type: List
      options:
        - name: youden
          title: Youden-Index
        - name: sum_sens_spec
          title: 'Sum: Sens/Spec'
        - name: accuracy
          title: Accuracy
        - name: sum_ppv_npv
          title: 'Sum: PPV/NPV'
        - name: prod_sens_spec
          title: 'Prod: Sens/Spec'
        - name: prod_ppv_npv
          title: 'Prod: PPV/NPV'
        - name: cohens_kappa
          title: "Cohen's Kappa"
        - name: abs_d_sens_spec
          title: 'Abs. d: Sens/Spec'
        - name: roc01
          title: 'ROC'
        - name: abs_d_ppv_npv
          title: 'Abs. d: PPV/NPV'
        - name: p_chisquared
          title: 'Chi-squared'
        - name: odds_ratio
          title: Odds Ratio
        - name: risk_ratio
          title: Risk Ratio
        - name: misclassification_cost
          title: Misclassification Cost
        - name: total_utility
          title: Total Utility
        - name: F1_score
          title: F1 score
      default: youden
      description:
          R: >
            Metric to optimize when determining cutpoint.

    - name: boot_runs
      title: Bootstrap runs
      type: Number
      default: 0
      description:
          R: >
            Number of bootstrap runs for methods using bootstrapping.

    - name: break_ties
      title: Ties
      type: List
      options:
        - name: c
          title: All optimal cutpoints
        - name: mean
          title: Mean optimal cutpoint
        - name: median
          title: Median optimal cutpoint
      default: mean
      description:
          R: >
            Method for breaking ties when multiple optimal cutpoints exist.

    - name: tol_metric
      title: Tolerance metric
      type: Number
      default: 0.05
      description:
          R: >
            Tolerance for the metric when determining optimal cutpoint.

    - name: direction
      title: Direction
      type: List
      options:
        - name: ">="
          title: ">="
        - name: "<="
          title: "<="
      default: ">="
      description:
          R: >
            Direction of classification relative to cutpoint.

    - name: plotROC
      title: ROC Curves
      type: Bool
      default: true
      description:
          R: >
            Display ROC curves.

    - name: combinePlots
      title: Combine plots
      type: Bool
      default: true
      description:
          R: >
            Combine ROC curves in a single plot.

    - name: displaySE
      title: Standard error bars
      type: Bool
      default: false
      description:
          R: >
            Display standard error bars on ROC curves.

    - name: smoothing
      title: LOESS smoothing
      type: Bool
      default: false
      description:
          R: >
            Apply LOESS smoothing to ROC curves.

    - name: sensSpecTable
      title: Sensitivity-specificity tables
      type: Bool
      default: false
      description:
          R: >
            Display detailed sensitivity/specificity tables.

    - name: delongTest
      title: DeLong's test
      type: Bool
      default: false
      description:
          R: >
            Perform DeLong's test for comparing AUCs.


    - name: showCriterionPlot
      title: Show Sensitivity/Specificity vs. Threshold Plot
      type: Bool
      default: false
      description:
          R: >
            Boolean option to display the Sensitivity/Specificity vs. Threshold plot.

    - name: showPrevalencePlot
      title: Show Predictive Values vs. Prevalence Plot
      type: Bool
      default: false
      description:
          R: >
            Boolean option to display the Predictive Values vs. Prevalence plot.

    - name: showDotPlot
      title: Show Dot Plot
      type: Bool
      default: false
      description:
          R: >
            Boolean option to display the Dot Plot showing distribution of values by class.


    - name: showOptimalPoint
      title: Show optimal point
      type: Bool
      default: true
      description:
          R: >
            Display the optimal point on the ROC curve.

    - name: showConfidenceBands
      title: Show confidence bands
      type: Bool
      default: false
      description:
          R: >
            Display confidence bands around the ROC curve.


    - name: cleanPlot
      title: Publication-quality plot
      type: Bool
      default: false
      description:
          R: >
            Produce a clean ROC curve without annotations, suitable for publications.

            
    - name: legendPosition
      title: Legend position
      type: List
      options:
        - name: "none"
          title: "None"
        - name: "right"
          title: "Right"
        - name: "bottom"
          title: "Bottom"
        - name: "topleft"
          title: "Top left"
        - name: "topright" 
          title: "Top right"
      default: "right"
      description:
          R: >
            Position of the legend in multiple ROC curve plots.


    - name: showThresholdTable
      title: Show threshold table
      type: Bool
      default: false
      description:
          R: >
            Display detailed table with different threshold values and corresponding 
            performance metrics (sensitivity, specificity, etc.)

    - name: maxThresholds
      title: Maximum thresholds to display
      type: Number
      default: 20
      min: 5
      max: 100
      description:
          R: >
            Maximum number of threshold values to display in the table.


    - name: costratioFP
      title: Cost ratio (FP/FN)
      type: Number
      default: 1.0
      min: 0.01
      max: 100.0
      description:
          R: >
              Cost ratio of false positives to false negatives. Higher values penalize false positives more.


    - name: interactiveROC
      title: Interactive ROC Plot
      type: Bool
      default: false
      description:
          R: >
              Create an interactive HTML ROC plot.


    - name: directLabel
      title: Direct Label Curves
      type: Bool
      default: false
      description:
          R: >
              Directly label ROC curves instead of using a legend.



    - name: quantileCIs 
      title: Show CIs at Quantiles
      type: Bool
      default: false
      description:
          R: >
              Show confidence intervals at specific quantiles.

    - name: quantiles
      title: Quantile Positions
      type: String
      default: "0.1,0.25,0.5,0.75,0.9"
      description:
          R: >
              Comma-separated list of quantiles at which to display confidence intervals. 

    - name: usePriorPrev
      title: Use prior prevalence
      type: Bool
      default: false
      description:
          R: >
              Use a specified prior prevalence instead of calculating from data.

    - name: priorPrev
      title: Prior prevalence
      type: Number
      default: 0.5
      min: 0.001
      max: 0.999
      description:
          R: >
              Prior probability (disease prevalence) to use for calculations.


...
