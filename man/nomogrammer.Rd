% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/nomogrammer.r
\name{nomogrammer}
\alias{nomogrammer}
\title{Fagan Nomogram for Diagnostic Test Analysis}
\usage{
nomogrammer(
  Prevalence,
  Sens = NULL,
  Spec = NULL,
  Plr = NULL,
  Nlr = NULL,
  Detail = FALSE,
  NullLine = FALSE,
  LabelSize = (14/5),
  Verbose = FALSE
)
}
\arguments{
\item{Prevalence}{Prior probability (prevalence) as a number between 0 and 1.
This represents the probability of disease before the test is performed.}

\item{Sens}{Model sensitivity as a number between 0 and 1. The probability
that the test is positive when the disease is present. Optional if Plr/Nlr provided.}

\item{Spec}{Model specificity as a number between 0 and 1. The probability
that the test is negative when the disease is absent. Optional if Plr/Nlr provided.}

\item{Plr}{Positive likelihood ratio (calculated from Sens and Spec if not provided).
Must be >= 1. If provided along with Nlr, takes precedence over Sens/Spec.}

\item{Nlr}{Negative likelihood ratio (calculated from Sens and Spec if not provided).
Must be between 0 and 1. If provided along with Plr, takes precedence over Sens/Spec.}

\item{Detail}{Logical. If TRUE, overlays key statistics (prevalence, likelihood ratios,
posterior probabilities) onto the plot.}

\item{NullLine}{Logical. If TRUE, adds a reference line from prior probability
through LR = 1 to illustrate an uninformative test.}

\item{LabelSize}{Numeric. Controls the size of text labels on the plot.
Default is 14/5 ≈ 2.8.}

\item{Verbose}{Logical. If TRUE, prints diagnostic metrics to the console.}
}
\value{
A ggplot2 object containing the Fagan nomogram. The plot shows:
\itemize{
\item Left axis: Prior probability (prevalence) as percentages
\item Middle axis: Likelihood ratios
\item Right axis: Posterior probability as percentages
\item Red line: Positive test pathway
\item Blue line: Negative test pathway
}
}
\description{
Creates Fagan nomograms for Bayesian analysis in diagnostic testing.
A Fagan nomogram is a graphical tool used to estimate post-test probabilities
from pre-test probabilities and likelihood ratios. This function supports
input via sensitivity/specificity or directly via likelihood ratios.
}
\details{
The Fagan nomogram visually represents Bayes' theorem for diagnostic testing:

\deqn{Post-test odds = Pre-test odds × Likelihood ratio}

The function accepts either:
\itemize{
\item Sensitivity and Specificity (traditional approach)
\item Positive and Negative Likelihood Ratios (direct approach)
}

If both are provided, sensitivity/specificity take precedence and a warning is issued.

Mathematical relationships:
\itemize{
\item PLR = Sensitivity / (1 - Specificity)
\item NLR = (1 - Sensitivity) / Specificity
\item When calculating from LRs: Specificity = (PLR - 1) / (PLR - NLR)
\item When calculating from LRs: Sensitivity = PLR × (1 - Specificity)
\item Post-test probability (+) = (Prevalence × PLR) / ((Prevalence × PLR) + (1 - Prevalence))
\item Post-test probability (-) = (Prevalence × NLR) / ((Prevalence × NLR) + (1 - Prevalence))
}
}
\note{
This function is used internally by the \code{decision} analysis in
the ClinicoPath jamovi module for generating Fagan nomograms.
}
\examples{
# Example 1: Using sensitivity and specificity
nomogrammer(Prevalence = 0.3, Sens = 0.9, Spec = 0.8)

# Example 2: Using likelihood ratios directly
nomogrammer(Prevalence = 0.3, Plr = 4.5, Nlr = 0.125)

# Example 3: With detailed annotations and null line
nomogrammer(Prevalence = 0.1, Sens = 0.95, Spec = 0.85, 
            Detail = TRUE, NullLine = TRUE, Verbose = TRUE)

# Example 4: Low prevalence scenario (screening test)
nomogrammer(Prevalence = 0.01, Sens = 0.99, Spec = 0.95, Detail = TRUE)

}
\references{
Fagan TJ. Letter: Nomogram for Bayes theorem. N Engl J Med. 1975;293(5):257.

Based on Perl web-implementation: https://araw.mede.uic.edu/cgi-bin/testcalc.pl
Authors: A.M. Chekroud & A. Schwartz, December 2016
}
\seealso{
\code{\link{decision}}, \code{\link{decisioncalculator}} for related diagnostic test functions
}
\author{
ClinicoPath Development Team
}
